
<!doctype html><html lang="th"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/><title>เกมงู ธีมมืด</title><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet"/><style>:root{--bg-dark:#121217;--panel-dark:#1e1f29;--accent:#7c5cff;--text-light:#e1e2e7;--text-muted:#888ba7;--btn-bg:#2a2c3d;--btn-hover:#3b3f58;--shadow:rgba(124,92,255,0.4);}*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;-webkit-tap-highlight-color:transparent;}body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:var(--bg-dark);color:var(--text-light);} .game-container{text-align:center;background:var(--panel-dark);border-radius:20px;padding:25px 30px;box-shadow:0 10px 30px var(--shadow);position:relative;}.score{font-size:22px;margin-bottom:8px;color:var(--accent);font-weight:700;}canvas{border:3px solid var(--accent);border-radius:10px;background:#2a2c3d;width:100%;max-width:400px;height:auto;}.controls{margin-top:24px;}button{background:var(--btn-bg);color:var(--text-light);border:none;padding:18px 24px;border-radius:14px;font-size:1.4rem;font-weight:600;cursor:pointer;margin:8px;transition:background .3s,box-shadow .3s,transform .15s;box-shadow:0 4px 8px var(--shadow);}button:hover{background:var(--btn-hover);box-shadow:0 6px 20px var(--shadow);}button:active{transform:scale(.96);}.dpad{display:grid;grid-template-columns:60px 60px 60px;grid-template-rows:60px 60px 60px;justify-content:center;gap:6px;margin-top:16px;}.dpad button{width:60px;height:60px;font-size:24px;border-radius:12px;padding:0;}.dpad .empty{visibility:hidden;}.game-over{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.85);padding:30px;border-radius:15px;text-align:center;}@media (max-width:480px){.dpad button{width:50px;height:50px;font-size:20px;}}</style></head><body><div class="game-container"><div class="score">คะแนน: <span id="score">0</span></div><canvas id="gameCanvas" width="390" height="390"></canvas><div class="controls"><button id="pauseBtn" style="background:#a78bfa;color:#222;min-width:44px;">⏸️</button><button onclick="startGame()">เริ่มใหม่</button></div><div class="dpad"><div class="empty"></div><button id="up">⬆️</button><div class="empty"></div><button id="left">⬅️</button><div class="empty"></div><button id="right">➡️</button><div class="empty"></div><button id="down">⬇️</button><div class="empty"></div></div><div class="game-over" id="gameOver"><h2>จบเกม!</h2><p>คะแนนของคุณ: <span id="finalScore">0</span></p><button onclick="startGame()">เล่นอีกครั้ง</button></div><button id="settingsBtn" title="ตั้งค่า" style="position:absolute;top:10px;right:10px;z-index:10;background:#222;color:#fff;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 2px 8px #7c5cff44;border:none;cursor:pointer;"><span>⚙️</span></button><div id="settingsModal" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);backdrop-filter:blur(2.5px);display:flex;justify-content:center;align-items:center;"><div style="background:#23243a;padding:24px 4vw 20px 4vw;border-radius:18px;box-shadow:0 8px 32px #000a;min-width:0;max-width:99vw;width:100%;max-width:400px;position:relative;display:flex;flex-direction:column;align-items:center;"><button id="closeSettings" style="position:absolute;top:12px;right:12px;background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;">✖️</button><h3 style="color:#a78bfa;margin-bottom:20px;font-size:1.22rem;font-weight:600;letter-spacing:0.5px;text-align:center;width:100%;">ตั้งค่าเกม</h3><div style="display:flex;flex-direction:column;gap:18px;width:100%;max-width:340px;margin:0 auto;"><div style="display:flex;align-items:center;justify-content:space-between;width:100%;gap:12px;background:#181828;border-radius:14px;padding:14px 12px;box-sizing:border-box;flex-wrap:wrap;"><span style="color:#fff;font-size:1.12rem;min-width:80px;text-align:left;">ความเร็ว</span><input id="speedInput" type="number" min="50" max="500" value="200" step="10" style="width:60px;font-size:1.12rem;text-align:center;box-sizing:border-box;background:#23243a;border:none;color:#fff;border-radius:8px;padding:4px 8px;"></div><div style="display:flex;align-items:center;justify-content:space-between;width:100%;gap:12px;background:#181828;border-radius:14px;padding:14px 12px;box-sizing:border-box;flex-wrap:wrap;"><span style="color:#fff;font-size:1.12rem;min-width:80px;text-align:left;">จำนวนผลไม้</span><input id="foodInput" type="number" min="1" max="10" value="1" style="width:60px;font-size:1.12rem;text-align:center;box-sizing:border-box;background:#23243a;border:none;color:#fff;border-radius:8px;padding:4px 8px;"></div></div></div></div></div><script>const canvas=document.getElementById('gameCanvas'),ctx=canvas.getContext('2d'),scoreElement=document.getElementById('score'),gameOverElement=document.getElementById('gameOver'),finalScore=document.getElementById('finalScore');const gridSize=30,tileCount=canvas.width/gridSize;let snake,food,dx,dy,score,isGameRunning,lastUpdateTime,frameInterval=200;function resetGame(){snake=[{x:Math.floor(tileCount/2),y:Math.floor(tileCount/2)}],dx=0,dy=0,score=0,scoreElement.textContent=score,food=null,foods=[];let t=window.foodCountSetting||1;for(let e=0;e<t;e++)foods.push(randomFood());isGameRunning=!0,lastUpdateTime=0}function randomFood(){let t;do{t={x:Math.floor(Math.random()*tileCount),y:Math.floor(Math.random()*tileCount)}}while(snake.some(e=>e.x===t.x&&e.y===t.y));return t}function drawGrid(){ctx.save(),ctx.strokeStyle="#444",ctx.lineWidth=1;for(let t=1;t<tileCount;t++)ctx.beginPath(),ctx.moveTo(t*gridSize,0),ctx.lineTo(t*gridSize,canvas.height),ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,t*gridSize),ctx.lineTo(canvas.width,t*gridSize),ctx.stroke();ctx.restore()}function drawSnake(){if(snake.length>1){ctx.save(),ctx.strokeStyle="#7c5cff",ctx.lineCap="round",ctx.lineJoin="round",ctx.lineWidth=.9*gridSize,ctx.globalAlpha=.97,ctx.beginPath();for(let t=0;t<snake.length;t++){const e=snake[t],i=e.x*gridSize+gridSize/2,n=e.y*gridSize+gridSize/2;0===t?ctx.moveTo(i,n):ctx.lineTo(i,n)}ctx.stroke(),ctx.globalAlpha=1,ctx.restore()}if(snake.length>0){const t=snake[0],e=t.x*gridSize+gridSize/2,i=t.y*gridSize+gridSize/2;ctx.save(),ctx.beginPath(),ctx.arc(e,i,.45*gridSize,0,2*Math.PI),ctx.fillStyle="#a78bfa",ctx.shadowColor="#7c5cff",ctx.shadowBlur=8,ctx.fill(),ctx.shadowBlur=0,ctx.beginPath(),ctx.arc(e-5,i-3,2,0,2*Math.PI),ctx.arc(e+5,i-3,2,0,2*Math.PI),ctx.fillStyle="#222",ctx.fill(),ctx.beginPath(),ctx.strokeStyle="#222",ctx.lineWidth=2,ctx.arc(e,i+4,6,.15*Math.PI,.85*Math.PI),ctx.stroke(),ctx.restore()}}function drawFood(){ctx.save();for(const t of window.foods||[food])ctx.beginPath(),ctx.arc(t.x*gridSize+gridSize/2,t.y*gridSize+gridSize/2,.42*gridSize,0,2*Math.PI),(()=>{const e=ctx.createRadialGradient(t.x*gridSize+gridSize/2,t.y*gridSize+gridSize/2,.1*gridSize,t.x*gridSize+gridSize/2,t.y*gridSize+gridSize/2,.42*gridSize);e.addColorStop(0,"#fff1f2"),e.addColorStop(.5,"#fb7185"),e.addColorStop(1,"#be123c"),ctx.fillStyle=e})(),ctx.shadowColor="#fb7185",ctx.shadowBlur=8,ctx.fill(),ctx.shadowBlur=0;ctx.restore()}function moveSnake(){const t={x:snake[0].x+dx,y:snake[0].y+dy};snake.unshift(t);let e=!1;for(let i=0;i<foods.length;i++)if(t.x===foods[i].x&&t.y===foods[i].y){score+=10,scoreElement.textContent=score,foods[i]=randomFood(),e=!0;break}e||snake.pop()}function checkCollision(){const t=snake[0];return t.x<0||t.y<0||t.x>=tileCount||t.y>=tileCount||snake.slice(1).some(e=>e.x===t.x&&e.y===t.y)}function drawGame(){ctx.clearRect(0,0,canvas.width,canvas.height),drawGrid(),moveSnake(),checkCollision()?(endGame(),void 0):(drawFood(),void drawSnake())}function gameLoop(t){if(!isGameRunning)return;if(isPaused)return void requestAnimationFrame(gameLoop);const e=t-lastUpdateTime;e>frameInterval&&(drawGame(),lastUpdateTime=t),requestAnimationFrame(gameLoop)}function startGame(){resetGame(),gameOverElement.style.display="none",requestAnimationFrame(gameLoop)}function endGame(){isGameRunning=!1,finalScore.textContent=score,gameOverElement.style.display="block"}let isPaused=!1;function setPause(t){isPaused=t;const e=document.getElementById("pauseBtn");e&&(e.textContent=isPaused?"▶️":"⏸️")}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("pauseBtn");t&&t.addEventListener("click",()=>{setPause(!isPaused),isPaused||(lastUpdateTime=performance.now(),requestAnimationFrame(gameLoop))})}),document.addEventListener("keydown",t=>{"ArrowUp"===t.key&&1!==dy&&(dx=0,dy=-1),"ArrowDown"===t.key&&-1!==dy&&(dx=0,dy=1),"ArrowLeft"===t.key&&1!==dx&&(dx=-1,dy=0),"ArrowRight"===t.key&&-1!==dx&&(dx=1,dy=0)}),document.getElementById("up").addEventListener("touchstart",t=>{t.preventDefault(),1!==dy&&(dx=0,dy=-1)}),document.getElementById("down").addEventListener("touchstart",t=>{t.preventDefault(),-1!==dy&&(dx=0,dy=1)}),document.getElementById("left").addEventListener("touchstart",t=>{t.preventDefault(),1!==dx&&(dx=-1,dy=0)}),document.getElementById("right").addEventListener("touchstart",t=>{t.preventDefault(),-1!==dx&&(dx=1,dy=0)}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("settingsBtn"),e=document.getElementById("settingsModal"),i=document.getElementById("closeSettings"),n=document.getElementById("speedInput"),d=document.getElementById("foodInput");t.addEventListener("click",()=>{e.style.display="flex",n.value=frameInterval,d.value=window.foodCountSetting||1}),i.addEventListener("click",()=>{e.style.display="none"}),e.addEventListener("click",o=>{o.target===e&&(e.style.display="none")}),n.addEventListener("input",()=>{let o=parseInt(n.value);if(""===n.value)return void(frameInterval=200);isNaN(o)||o<=0&&(o=1),n.value=o,frameInterval=o}),d.addEventListener("input",()=>{let o=parseInt(d.value);if(""===d.value)return void(window.foodCountSetting=1);isNaN(o)||o<=0&&(o=1),d.value=o,window.foodCountSetting=o}),window.foodCountSetting=1,frameInterval=parseInt(n.value)||200}),startGame();</script></body></html>
